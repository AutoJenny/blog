{% extends "base.html" %}

{% block title %}Posts tagged with {{ tag.name }}{% endblock %}

{% block content %}
<div class="blog-container">
    <nav class="blog-nav">
        <a href="{{ url_for('blog.latest') }}" class="nav-link">‚Üê Back to All Posts</a>
    </nav>

    <header class="blog-header">
        <h1>Posts tagged with "{{ tag.name }}"</h1>
    </header>

    {% if posts %}
    <div class="blog-grid">
        {% for post in posts %}
        <article class="blog-card">
            {% if post.header_image %}
            <figure class="blog-card__image">
                <img src="{{ url_for('static', filename=post.header_image.path) }}"
                    alt="{{ post.header_image.alt_text }}">
            </figure>
            {% endif %}
            <div class="blog-card__content">
                <h2 class="blog-card__title">{{ post.title }}</h2>
                {% if post.description %}
                <p class="blog-card__description">{{ post.description | truncate(150) }}</p>
                {% endif %}
                <div class="blog-card__meta">
                    <time datetime="{{ post.published_at or post.created_at }}">
                        {{ post.published_at.strftime('%B %d, %Y') if post.published_at else
                        post.created_at.strftime('%B %d, %Y') }}
                    </time>
                    <a href="{{ url_for('blog.post', slug=post.slug) }}" class="blog-card__link">Read More</a>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <p class="blog-message">No posts found with this tag.</p>
    {% endif %}
</div>
{% endblock %}