<!-- Workflow Navigation Wireframe -->
<div class="bg-dark-bg border-b border-dark-border py-4">
    <div class="container mx-auto px-4">
        <!-- Line 1: Breadcrumbs and Post Selector -->
        <div class="flex justify-between items-center mb-6">
            <nav class="text-sm text-gray-400">
                <a href="{{ url_for('workflow.index') }}" class="hover:text-dark-text">Workflow</a>
                <span class="mx-2">/</span>
                <a href="{{ url_for('workflow.stage', stage=current_stage) }}" class="hover:text-dark-text">{{
                    current_stage|title }}</a>
                <span class="mx-2">/</span>
                <span class="text-dark-text">{{ current_substage|title }}</span>
            </nav>
            <div class="relative">
                <!-- Post selector dropdown (not functional yet) -->
                <button
                    class="px-4 py-2 bg-dark-bg border border-dark-border rounded-lg text-dark-text hover:bg-dark-hover">
                    Select Post
                </button>
            </div>
        </div>

        <!-- Line 2: Sub-stages as named icons -->
        <div class="grid grid-cols-3 gap-4 mb-6">
            <!-- Planning Stage -->
            <div class="text-center">
                <h3 class="text-lg font-semibold mb-4 text-dark-text">Planning</h3>
                <div class="grid grid-cols-3 gap-2">
                    <a href="{{ url_for('workflow.step', stage='planning', substage='idea', step='basic_idea') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'planning' and current_substage == 'idea' %}border-blue-500{% endif %}">
                        <i class="fas fa-lightbulb text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Idea</div>
                    </a>
                    <a href="{{ url_for('workflow.step', stage='planning', substage='research', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'planning' and current_substage == 'research' %}border-blue-500{% endif %}">
                        <i class="fas fa-search text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Research</div>
                    </a>
                    <a href="{{ url_for('workflow.step', stage='planning', substage='outline', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'planning' and current_substage == 'outline' %}border-blue-500{% endif %}">
                        <i class="fas fa-sitemap text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Outline</div>
                    </a>
                </div>
            </div>

            <!-- Writing Stage -->
            <div class="text-center">
                <h3 class="text-lg font-semibold mb-4 text-dark-text">Writing</h3>
                <div class="grid grid-cols-3 gap-2">
                    <a href="{{ url_for('workflow.step', stage='writing', substage='draft', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'writing' and current_substage == 'draft' %}border-blue-500{% endif %}">
                        <i class="fas fa-pen text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Draft</div>
                    </a>
                    <a href="{{ url_for('workflow.step', stage='writing', substage='edit', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'writing' and current_substage == 'edit' %}border-blue-500{% endif %}">
                        <i class="fas fa-edit text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Edit</div>
                    </a>
                    <a href="{{ url_for('workflow.step', stage='writing', substage='review', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'writing' and current_substage == 'review' %}border-blue-500{% endif %}">
                        <i class="fas fa-check-double text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Review</div>
                    </a>
                </div>
            </div>

            <!-- Publishing Stage -->
            <div class="text-center">
                <h3 class="text-lg font-semibold mb-4 text-dark-text">Publishing</h3>
                <div class="grid grid-cols-3 gap-2">
                    <a href="{{ url_for('workflow.step', stage='publishing', substage='format', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'publishing' and current_substage == 'format' %}border-blue-500{% endif %}">
                        <i class="fas fa-file-alt text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Format</div>
                    </a>
                    <a href="{{ url_for('workflow.step', stage='publishing', substage='media', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'publishing' and current_substage == 'media' %}border-blue-500{% endif %}">
                        <i class="fas fa-image text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Media</div>
                    </a>
                    <a href="{{ url_for('workflow.step', stage='publishing', substage='publish', step='main') }}"
                        class="p-4 bg-dark-bg border border-dark-border rounded-lg hover:bg-dark-hover {% if current_stage == 'publishing' and current_substage == 'publish' %}border-blue-500{% endif %}">
                        <i class="fas fa-paper-plane text-2xl mb-2 text-dark-text"></i>
                        <div class="text-sm text-dark-text">Publish</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Line 3: Tabs for steps in the current sub-stage -->
        <div class="border-b border-dark-border mb-6">
            <div class="flex space-x-4">
                {% if current_substage == 'idea' %}
                <a href="{{ url_for('workflow.step', stage='planning', substage='idea', step='basic_idea') }}"
                    class="px-4 py-2 border-b-2 {% if current_step == 'basic_idea' %}border-blue-500 text-blue-500{% else %}border-transparent text-gray-400 hover:text-dark-text{% endif %}">
                    Basic Idea
                </a>
                <a href="{{ url_for('workflow.step', stage='planning', substage='idea', step='provisional_title') }}"
                    class="px-4 py-2 border-b-2 {% if current_step == 'provisional_title' %}border-blue-500 text-blue-500{% else %}border-transparent text-gray-400 hover:text-dark-text{% endif %}">
                    Provisional Title
                </a>
                {% else %}
                <a href="{{ url_for('workflow.step', stage=current_stage, substage=current_substage, step='main') }}"
                    class="px-4 py-2 border-b-2 {% if current_step == 'main' %}border-blue-500 text-blue-500{% else %}border-transparent text-gray-400 hover:text-dark-text{% endif %}">
                    Main
                </a>
                <a href="{{ url_for('workflow.step', stage=current_stage, substage=current_substage, step='step1') }}"
                    class="px-4 py-2 border-b-2 {% if current_step == 'step1' %}border-blue-500 text-blue-500{% else %}border-transparent text-gray-400 hover:text-dark-text{% endif %}">
                    Step 1
                </a>
                <a href="{{ url_for('workflow.step', stage=current_stage, substage=current_substage, step='step2') }}"
                    class="px-4 py-2 border-b-2 {% if current_step == 'step2' %}border-blue-500 text-blue-500{% else %}border-transparent text-gray-400 hover:text-dark-text{% endif %}">
                    Step 2
                </a>
                <a href="{{ url_for('workflow.step', stage=current_stage, substage=current_substage, step='step3') }}"
                    class="px-4 py-2 border-b-2 {% if current_step == 'step3' %}border-blue-500 text-blue-500{% else %}border-transparent text-gray-400 hover:text-dark-text{% endif %}">
                    Step 3
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>