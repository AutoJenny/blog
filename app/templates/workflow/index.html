{% extends 'base.html' %}

{% block content %}
<div id="llm-actions-root" style="max-width:700px;margin:40px auto;padding:20px;">
    <!-- Heading area with post selector and Run LLM button -->
    <div class="llm-heading" style="display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem;gap:1.5rem;">
        <div style="display:flex;align-items:center;gap:1rem;">
            <span class="font-bold text-lg">Post:</span>
            <select id="post-selector">
                <option value="1">Sample Post</option>
            </select>
            <span style="margin-left:1.5em;color:#7ecfff;">post_id: 1</span>
        </div>
        <button id="runLLM" style="padding:0.7em 2em;font-size:1.1em;background:#007bff;color:white;border:none;border-radius:4px;cursor:pointer;">Run LLM</button>
    </div>
    
    <!-- Accordions -->
    <!-- Inputs Accordion -->
    <details open class="llm-accordion" style="margin-bottom:1rem;border:1px solid #333;border-radius:4px;">
        <summary style="padding:1rem;background:#2a2d35;cursor:pointer;font-weight:bold;">Inputs</summary>
        <div class="llm-accordion-content" style="padding:1rem;background:#1e2127;">
            <label for="inputField" style="display:block;margin-bottom:0.5rem;">Input Field</label>
            <select id="inputField" style="width:100%;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;margin-bottom:0.5rem;">
                <option value="idea_seed">Idea Seed</option>
                <option value="title">Title</option>
            </select>
            <textarea id="inputValue" rows="3" style="width:100%;margin-top:8px;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;resize:vertical;" placeholder="Enter your input here..."></textarea>
        </div>
    </details>
    
    <!-- Prompt Accordion -->
    <details class="llm-accordion" style="margin-bottom:1rem;border:1px solid #333;border-radius:4px;">
        <summary style="padding:1rem;background:#2a2d35;cursor:pointer;font-weight:bold;">Prompt</summary>
        <div class="llm-accordion-content" style="padding:1rem;background:#1e2127;">
            <label for="systemPrompt" style="display:block;margin-bottom:0.5rem;">System Prompt</label>
            <textarea id="systemPrompt" rows="2" style="width:100%;margin-bottom:8px;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;resize:vertical;">You are an expert in Scottish history and culture...</textarea>
            <label for="taskPrompt" style="display:block;margin-bottom:0.5rem;">Task Prompt</label>
            <textarea id="taskPrompt" rows="3" style="width:100%;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;resize:vertical;">Expand the following short idea into a paragraph-length brief for a long-form big article: {{ idea_seed }}</textarea>
        </div>
    </details>
    
    <!-- Settings Accordion -->
    <details class="llm-accordion" style="margin-bottom:1rem;border:1px solid #333;border-radius:4px;">
        <summary style="padding:1rem;background:#2a2d35;cursor:pointer;font-weight:bold;">Settings</summary>
        <div class="llm-accordion-content" style="padding:1rem;background:#1e2127;">
            <label for="model" style="display:block;margin-bottom:0.5rem;">Model</label>
            <select id="model" style="width:100%;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;margin-bottom:1rem;">
                <option value="llama3">llama3</option>
                <option value="mistral">mistral</option>
            </select>
            <label for="temperature" style="display:block;margin-bottom:0.5rem;">Temperature</label>
            <input type="number" id="temperature" value="0.7" min="0" max="2" step="0.1" style="width:100%;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;">
        </div>
    </details>
    
    <!-- Outputs Accordion -->
    <details class="llm-accordion" style="margin-bottom:1rem;border:1px solid #333;border-radius:4px;">
        <summary style="padding:1rem;background:#2a2d35;cursor:pointer;font-weight:bold;">Outputs</summary>
        <div class="llm-accordion-content" style="padding:1rem;background:#1e2127;">
            <label for="outputField" style="display:block;margin-bottom:0.5rem;">Output Field</label>
            <select id="outputField" style="width:100%;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;margin-bottom:0.5rem;">
                <option value="brief">Brief</option>
                <option value="content">Content</option>
            </select>
            <textarea id="outputValue" rows="6" style="width:100%;margin-top:8px;padding:0.5rem;background:#2a2d35;color:#e0e0e0;border:1px solid #333;border-radius:4px;resize:vertical;" readonly placeholder="LLM output will appear here..."></textarea>
        </div>
    </details>
</div>

<script>
// Basic functionality for the accordion interface
document.addEventListener('DOMContentLoaded', function() {
    // Run LLM button functionality
    document.getElementById('runLLM').addEventListener('click', function() {
        const inputValue = document.getElementById('inputValue').value;
        const systemPrompt = document.getElementById('systemPrompt').value;
        const taskPrompt = document.getElementById('taskPrompt').value;
        const model = document.getElementById('model').value;
        const temperature = document.getElementById('temperature').value;
        
        if (!inputValue.trim()) {
            alert('Please enter some input text first.');
            return;
        }
        
        // Simulate LLM processing
        document.getElementById('outputValue').value = 'Processing...';
        
        // For now, just show a placeholder response
        setTimeout(() => {
            document.getElementById('outputValue').value = `Generated content based on: "${inputValue}"\n\nUsing model: ${model}\nTemperature: ${temperature}\n\nThis is a placeholder response. The actual LLM integration will be implemented next.`;
        }, 1000);
    });
    
    // Post selector functionality
    document.getElementById('post-selector').addEventListener('change', function() {
        console.log('Selected post:', this.value);
        // Here you would load the selected post's data
    });
});
</script>
{% endblock %} 