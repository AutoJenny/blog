{% extends "base.html" %}
{% import "workflow/workflow_indicator.html" as indicator %}
{% import "blog/_post_header.html" as blog_macros %}

{% block title %}Planning: Themes{% endblock %}

{% block content %}
<div class="container mx-auto px-6 py-8">
    {{ blog_macros.post_header(post) }}
    {{ indicator.process_indicator(substages, stages, current_substage_id, post=post) }}

    <!-- Idea Stage Custom UI -->
    <div class="mt-8 space-y-8">
        <!-- Tabs -->
        <div class="flex space-x-4 border-b border-gray-700">
            <a href="/workflow/idea/basic/?post_id={{ post.id if post else '' }}"
                class="tab-button px-4 py-2 text-gray-300">
                Basic Idea
            </a>
            <a href="/workflow/idea/themes/?post_id={{ post.id if post else '' }}"
                class="tab-button active-tab px-4 py-2 text-gray-300 border-b-2 border-blue-500">
                Themes
            </a>
        </div>

        <!-- Themes Content -->
        <div class="tab-content">
            <!-- Inputs Panel -->
            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h2 class="text-xl font-bold text-gray-100 mb-4">Themes</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Main Themes</label>
                        <textarea id="main-themes" class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg"
                            rows="3">{{ post_development.main_themes if post_development else '' }}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Sub-themes</label>
                        <textarea id="sub-themes" class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg"
                            rows="3">{{ post_development.sub_themes if post_development else '' }}</textarea>
                    </div>
                </div>
            </div>

            <!-- LLM Action Panel -->
            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h2 class="text-xl font-bold text-gray-100 mb-4">Generate Themes</h2>
                <div class="flex items-center space-x-4">
                    <button id="generate-themes" class="btn btn-primary">Generate Themes</button>
                </div>
            </div>

            <!-- Save Panel -->
            <div class="bg-gray-800 rounded-lg p-6 mt-6">
                <h2 class="text-xl font-bold text-gray-100 mb-4">Save Themes</h2>
                <button id="save-themes" class="btn btn-success">Save Themes</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/workflow/tab_manager.js"></script>
<script src="/static/js/workflow/idea_stage.js"></script>
{% endblock %}