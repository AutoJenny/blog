<!-- Channel Requirements Accordion Component -->
<div class="requirements-display" style="background: rgba(59, 130, 246, 0.1); border: 1px solid #3b82f6; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
    <h5 class="text-white mb-3">
        <i class="fas fa-cog text-info me-2"></i>
        {{ platform.display_name }} {{ channel_type.display_name }} Requirements
    </h5>
    <p class="text-light mb-3">
        <strong>Database-Driven Rules:</strong> These are the stored rules that will guide the LLM in rewriting blog posts for {{ platform.display_name }} {{ channel_type.display_name }}.
    </p>
    
    <!-- Requirements Accordion -->
    <div class="accordion" id="mvpRequirementsAccordion">
        {% set categories = {} %}
        {% for requirement in requirements %}
            {% if requirement.requirement_category not in categories %}
                {% set _ = categories.update({requirement.requirement_category: []}) %}
            {% endif %}
            {% set _ = categories[requirement.requirement_category].append(requirement) %}
        {% endfor %}
        
        {% for category, category_requirements in categories.items() %}
        <div class="accordion-item" style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(59, 130, 246, 0.3); margin-bottom: 0.5rem;">
            <h2 class="accordion-header" id="heading{{ category|replace(' ', '')|replace('-', '')|replace('_', '') }}">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                        data-bs-target="#collapse{{ category|replace(' ', '')|replace('-', '')|replace('_', '') }}" 
                        aria-expanded="false" 
                        aria-controls="collapse{{ category|replace(' ', '')|replace('-', '')|replace('_', '') }}"
                        style="background: rgba(59, 130, 246, 0.1); color: white; border: none;">
                    <div class="d-flex align-items-center w-100">
                        <i class="fas fa-cog me-3 text-info"></i>
                        <span class="flex-grow-1">{{ category|title }}</span>
                        <div class="requirement-indicator">
                            <span class="badge bg-info me-2">{{ category_requirements|length }} Rules</span>
                            <i class="fas fa-chevron-down text-muted"></i>
                        </div>
                    </div>
                </button>
            </h2>
            <div id="collapse{{ category|replace(' ', '')|replace('-', '')|replace('_', '') }}" 
                 class="accordion-collapse collapse" 
                 aria-labelledby="heading{{ category|replace(' ', '')|replace('-', '')|replace('_', '') }}" 
                 data-bs-parent="#mvpRequirementsAccordion">
                <div class="accordion-body" style="background: rgba(255, 255, 255, 0.02); padding: 1rem;">
                    {% for requirement in category_requirements %}
                    <div class="requirement-item" style="background: rgba(255, 255, 255, 0.05); border-radius: 6px; padding: 1rem; margin-bottom: 1rem;">
                        <div class="row">
                            <div class="col-md-3">
                                <span class="badge bg-primary">{{ requirement.requirement_key }}</span>
                            </div>
                            <div class="col-md-3">
                                <strong class="text-white">{{ requirement.requirement_value }}</strong>
                            </div>
                            <div class="col-md-6">
                                <small class="text-light">{{ requirement.description }}</small>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
