<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Prompts</title>
    <!-- Tailwind CSS -->
    <link href="/static/css/dist/main.css" rel="stylesheet">
    <!-- FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .header-gradient {
            background: linear-gradient(90deg, #181c2a 0%, #23273a 100%);
        }

        .nav-dropdown {
            background: #23273a;
            border: 1px solid #31364a;
            box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.45);
        }

        .nav-dropdown a {
            color: #e0e0e0;
        }

        .nav-dropdown a:hover {
            background: #23273a;
            color: #a5b4fc;
        }
    </style>
    
</head>

<body class="min-h-screen bg-dark-bg text-dark-text flex flex-col">
    <!-- Header -->
    <header class="header-gradient shadow-lg border-b border-dark-border py-4">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-nowrap items-center justify-between h-16 space-x-6">
                <div class="flex items-center space-x-8 flex-1 min-w-0">
                    <!-- Logo and Title -->
                    <a href="/" class="flex items-center gap-3 text-white text-2xl font-bold tracking-tight">
                        <img src="/static/images/site/brand-logo.png" alt="BlogForge Logo"
                            class="w-10 h-10 rounded-full shadow"
                            style="background:#23273a; width: 40px; height: 40px;" />
                        <span class="font-bold text-white">BlogForge</span>
                    </a>
                </div>
                <div class="flex items-center space-x-4 ml-8">
                    <!-- Modules Dropdown -->
                    <div class="relative group nav-group" tabindex="0">
                        <button
                            class="text-dark-text hover:text-dark-accent px-3 py-2 rounded-md text-sm font-medium transition flex items-center gap-1 focus:outline-none"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="fa-solid fa-cubes"></i> Modules <i class="fa fa-caret-down text-xs"></i>
                        </button>
                        <div class="nav-dropdown absolute left-0 mt-2 min-w-[180px] rounded-lg shadow-lg z-50 hidden">
                            <a href="/db/"
                                class="block px-4 py-2 text-sm flex items-center gap-2 hover:bg-dark-bg transition"><i
                                    class="fa-solid fa-database text-purple-400"></i> Database</a>
                            <a href="/llm/"
                                class="block px-4 py-2 text-sm flex items-center gap-2 hover:bg-dark-bg transition"><i
                                    class="fa-solid fa-brain text-pink-400"></i> AI</a>
                            <a href="/llm/images"
                                class="block px-4 py-2 text-sm flex items-center gap-2 hover:bg-dark-bg transition"><i
                                    class="fa-solid fa-image text-dark-accent"></i> Images</a>
                        </div>
                    </div>
                </div>
                <div class="flex-shrink-0 flex items-center gap-4 ml-4">
                    <a href="/blog/posts"
                        class="text-dark-text hover:text-dark-accent px-3 py-2 rounded-md text-sm font-medium transition">Posts</a>
                    <button
                        class="admin-button bg-dark-accent text-white hover:bg-dark-bg border border-dark-accent px-4 py-2 rounded-lg flex items-center gap-2 shadow transition"
                        id="newPostBtn">
                        <i class="fa-solid fa-plus"></i>
                        New Post
                    </button>
                    <a href="/docs/"
                        class="text-dark-text hover:text-dark-accent px-3 py-2 rounded-md text-sm font-medium transition">Docs</a>
                    <a href="/settings"
                        class="text-dark-text hover:text-dark-accent px-3 py-2 rounded-md text-sm font-medium transition">Settings</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    
    
    
    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8 text-gray-100">Workflow Prompts</h1>
    
    
    
    <form method="POST">
        
        <div class="border border-gray-700 rounded-lg overflow-hidden mb-2">
            <button type="button"
                class="w-full px-4 py-3 text-left bg-gray-700 hover:bg-gray-600 transition-colors duration-200 flex justify-between items-center"
                onclick="this.classList.toggle('active'); this.nextElementSibling.classList.toggle('hidden')">
                <span class="font-semibold text-gray-200">planning_structure_outline</span>
                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="hidden px-4 py-3 bg-gray-800">
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">system_prompt</label>
                    <textarea name="planning_structure_outline__system_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">You are an expert in Scottish history and culture, dedicated to accuracy and authenticity in everything you do. You adhere to academic values, but love to popularise ideas to make them easily understandable to those with no knowledge of your specialism.</textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">task_prompt</label>
                    <textarea name="planning_structure_outline__task_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">Generate a detailed blog post outline based on the expanded idea.</textarea>
                </div>
                
            </div>
        </div>
        
        <div class="border border-gray-700 rounded-lg overflow-hidden mb-2">
            <button type="button"
                class="w-full px-4 py-3 text-left bg-gray-700 hover:bg-gray-600 transition-colors duration-200 flex justify-between items-center"
                onclick="this.classList.toggle('active'); this.nextElementSibling.classList.toggle('hidden')">
                <span class="font-semibold text-gray-200">planning_research_concepts</span>
                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="hidden px-4 py-3 bg-gray-800">
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">system_prompt</label>
                    <textarea name="planning_research_concepts__system_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">[system] You are an expert in Scottish history and culture.</textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">task_prompt</label>
                    <textarea name="planning_research_concepts__task_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">[system] You are an expert in Scottish history and culture. Generate a list of key concepts for a post based on the following expanded idea. Return your response as a strict JSON array of strings, with no commentary or formatting—just the list of concepts.

Expanded Idea:
[data:basic_idea]</textarea>
                </div>
                
            </div>
        </div>
        
        <div class="border border-gray-700 rounded-lg overflow-hidden mb-2">
            <button type="button"
                class="w-full px-4 py-3 text-left bg-gray-700 hover:bg-gray-600 transition-colors duration-200 flex justify-between items-center"
                onclick="this.classList.toggle('active'); this.nextElementSibling.classList.toggle('hidden')">
                <span class="font-semibold text-gray-200">planning_idea_provisional_title</span>
                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="hidden px-4 py-3 bg-gray-800">
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">system_prompt</label>
                    <textarea name="planning_idea_provisional_title__system_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">You are an expert in Scottish history and culture.</textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">task_prompt</label>
                    <textarea name="planning_idea_provisional_title__task_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">Generate five alternative, arresting, and informative blog post titles for a post based on the following expanded idea. Return your response as a strict JSON array of strings, with no commentary or formatting—just the list of titles.

Expanded Idea:
[data:basic_idea]</textarea>
                </div>
                
            </div>
        </div>
        
        <div class="border border-gray-700 rounded-lg overflow-hidden mb-2">
            <button type="button"
                class="w-full px-4 py-3 text-left bg-gray-700 hover:bg-gray-600 transition-colors duration-200 flex justify-between items-center"
                onclick="this.classList.toggle('active'); this.nextElementSibling.classList.toggle('hidden')">
                <span class="font-semibold text-gray-200">planning_research_facts</span>
                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="hidden px-4 py-3 bg-gray-800">
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">system_prompt</label>
                    <textarea name="planning_research_facts__system_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">You are an expert in Scottish history and culture, dedicated to accuracy and authenticity in everything you do. You adhere to academic values, but love to popularise ideas to make them easily understandable to those with no knowledge of your specialism.</textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">task_prompt</label>
                    <textarea name="planning_research_facts__task_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">Use web searches to explore all aspects of the topic and make a list of exactly 50 interesting facts that this article could cover. Make these diverse, from whimsical to deeply significant, and from scientific to mythical. If fictional make this clear. Do NOT add introductions, conclusions, or commentary of any kind. Just give a list of facts. Keep your answers concise whilst capturing all important detail. Present these facts in list form, numbered 1-50. Do not end the task until you have reached 50. Return your response as a strict JSON array of strings, with no commentary or formatting—just the list of facts.</textarea>
                </div>
                
            </div>
        </div>
        
        <div class="border border-gray-700 rounded-lg overflow-hidden mb-2">
            <button type="button"
                class="w-full px-4 py-3 text-left bg-gray-700 hover:bg-gray-600 transition-colors duration-200 flex justify-between items-center"
                onclick="this.classList.toggle('active'); this.nextElementSibling.classList.toggle('hidden')">
                <span class="font-semibold text-gray-200">planning_idea_basic_idea</span>
                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="hidden px-4 py-3 bg-gray-800">
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">system_prompt</label>
                    <textarea name="planning_idea_basic_idea__system_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">You are an expert in Scottish history and culture, dedicated to accuracy and authenticity in everything you do. You adhere to academic values, but love to popularise ideas to make them easily understandable to those with no knowledge of your specialism. </textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-300 font-semibold mb-1">task_prompt</label>
                    <textarea name="planning_idea_basic_idea__task_prompt"
                        class="w-full px-3 py-2 bg-gray-700 text-gray-200 rounded border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                        rows="4">Expand the following short idea into a paragraph-length brief for a long-form blog article: {{ idea_seed }}

The brief should outline the scope, angle, tone, and core ideas that could be developed into a full article. Use clear, engaging language. 

Your response should:
1. Focus specifically on Scottish cultural and historical aspects
2. Maintain academic accuracy while being accessible
3. Suggest clear angles and themes for development
4. Use UK-British spellings and idioms
5. Return only the expanded brief about  {{ idea_seed }}, with no additional commentary or formatting, and no title.</textarea>
                </div>
                
            </div>
        </div>
        
        <div class="flex justify-end mt-6">
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Save
                Changes</button>
        </div>
    </form>
</div>

    </main>
    

    <!-- Footer -->
    <footer class="bg-indigo-950 border-t border-dark-border py-6 mt-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-dark-text">
                &copy; 2025 Blog CMS. All rights reserved. |
                <a href="/docs" class="text-indigo-300 hover:text-indigo-100 underline ml-2">Docs</a>
            </p>
        </div>
    </footer>

    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var newPostBtn = document.getElementById('newPostBtn');
            if (newPostBtn) {
                newPostBtn.addEventListener('click', async () => {
                    const basicIdea = prompt('Enter your basic idea for the post:');
                    if (!basicIdea) return;
                    try {
                        const response = await fetch("/blog/new", {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ basic_idea: basicIdea })
                        });
                        const data = await response.json();
                        if (response.ok && data.id) {
                            window.location.href = `/blog/post/${data.id}`;
                        } else {
                            alert(data.error || 'Failed to create post');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('Failed to create post');
                    }
                });
            }

            // Dropdown accessibility: open on click, close on outside click or Escape
            function setupDropdown() {
                document.querySelectorAll('.nav-group').forEach(function (group) {
                    var btn = group.querySelector('button');
                    var dropdown = group.querySelector('.nav-dropdown');
                    if (!btn || !dropdown) return;
                    // Toggle on click
                    btn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        var isOpen = !dropdown.classList.contains('hidden');
                        document.querySelectorAll('.nav-dropdown').forEach(d => { d.classList.add('hidden'); d.classList.remove('block'); });
                        if (!isOpen) { dropdown.classList.remove('hidden'); dropdown.classList.add('block'); }
                    });
                    // Open on focus
                    btn.addEventListener('focus', function () {
                        dropdown.classList.remove('hidden');
                        dropdown.classList.add('block');
                    });
                    // Close on blur (with delay for click)
                    btn.addEventListener('blur', function () {
                        setTimeout(() => { dropdown.classList.add('hidden'); dropdown.classList.remove('block'); }, 100);
                    });
                    // Close on Escape
                    group.addEventListener('keydown', function (e) {
                        if (e.key === 'Escape') { dropdown.classList.add('hidden'); dropdown.classList.remove('block'); }
                    });
                });
                // Close all dropdowns on outside click
                document.addEventListener('click', function (e) {
                    document.querySelectorAll('.nav-dropdown').forEach(d => { d.classList.add('hidden'); d.classList.remove('block'); });
                });
            }
            setupDropdown();
        });
    </script>
    
    <!-- Mermaid.js for diagrams in markdown -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.mermaid) {
                setTimeout(function () {
                    mermaid.initialize({ startOnLoad: false });
                    document.querySelectorAll('pre > code.language-mermaid').forEach(function (block, i) {
                        var parent = block.parentElement;
                        var code = block.innerText;
                        var d = document.createElement('div');
                        d.className = 'mermaid';
                        d.innerText = code;
                        parent.replaceWith(d);
                    });
                    try {
                        mermaid.run();
                    } catch (e) {
                        console.error('Mermaid render error:', e);
                        document.querySelectorAll('.mermaid').forEach(function (el) {
                            el.innerHTML = '<div style="color:#f87171;background:#23273a;padding:1em;border-radius:.5em;">Mermaid render error:<br>' + e.message + '</div>';
                        });
                    }
                }, 100);
            }
        });
    </script>
</body>

</html>