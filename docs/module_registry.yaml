# Module Registry
# This file defines the modular structure of the blog system
# Each module is a self-contained unit with specific responsibilities

modules:
  settings:
    description: "Core settings and configuration management"
    branch: "NEW_settings"
    paths:
      - app/settings/
      - app/templates/settings/
    dependencies: []
    routes:
      - /settings/
      - /settings/workflow_field_mapping
      - /settings/workflow_prompts
      - /settings/planning_steps
    tests:
      - settings_field_mapping
      - settings_prompts
      - settings_planning

  workflow_navigation:
    description: "Workflow navigation and routing system"
    branch: "NEW_workflow_navigation"
    paths:
      - app/templates/workflow/navigation/
      - app/workflow/navigation/
    dependencies: ["settings"]
    routes:
      - /workflow/
      - /workflow/<int:post_id>/
      - /workflow/<int:post_id>/<stage>/
      - /workflow/<int:post_id>/<stage>/<substage>/
    tests:
      - workflow_navigation
      - workflow_routing

  workflow_llm:
    description: "LLM integration and prompt management"
    branch: "NEW_workflow_llm"
    paths:
      - app/llm/
      - app/templates/llm/
      - app/data/prompts/
    dependencies: ["settings"]
    routes:
      - /llm/
      - /llm/providers
      - /llm/models
      - /llm/prompts
      - /llm/actions
    tests:
      - llm_providers
      - llm_actions
      - llm_prompts

  workflow_structure:
    description: "Structure planning and outline generation"
    branch: "NEW_workflow_structure"
    paths:
      - app/workflow/structure/
      - app/templates/workflow/structure/
    dependencies: ["workflow_llm", "workflow_navigation"]
    routes:
      - /workflow/<int:post_id>/planning/structure/
      - /api/v1/structure/
    tests:
      - structure_planning
      - structure_generation

  workflow_writing:
    description: "Content generation and post development"
    branch: "NEW_workflow_writing"
    paths:
      - app/workflow/writing/
      - app/templates/workflow/writing/
    dependencies: ["workflow_llm", "workflow_structure"]
    routes:
      - /workflow/<int:post_id>/writing/
      - /blog/api/v1/post/<int:post_id>/development
    tests:
      - writing_generation
      - post_development

  workflow_images:
    description: "Image generation and management"
    branch: "NEW_workflow_images"
    paths:
      - app/workflow/images/
      - app/templates/workflow/images/
    dependencies: ["workflow_llm"]
    routes:
      - /api/v1/images/
      - /llm/images/
    tests:
      - image_generation
      - image_styles

  blog_core:
    description: "Core blog functionality and post management"
    branch: "NEW_blog_core"
    paths:
      - app/blog/
      - app/templates/blog/
    dependencies: ["workflow_writing", "workflow_images"]
    routes:
      - /blog/
      - /blog/<slug>
      - /blog/posts
    tests:
      - blog_posts
      - blog_public

# Integration Rules
integration:
  main_branch: "NEW_HUB"
  merge_order:
    - settings
    - workflow_navigation
    - workflow_llm
    - workflow_structure
    - workflow_writing
    - workflow_images
    - blog_core

# Protection Rules
protection:
  required_tests: true
  required_review: true
  protected_branches:
    - NEW_HUB
    - NEW_settings
    - NEW_workflow_navigation
    - NEW_workflow_llm
    - NEW_workflow_structure
    - NEW_workflow_writing
    - NEW_workflow_images
    - NEW_blog_core 